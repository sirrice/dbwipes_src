

<script type="text/javascript">
var canned_queries = {
  intel : {
    query: "SELECT avg(temp), stddev(temp), date_trunc('hour',date+time) as dt\n FROM readings\n WHERE date > '2004-3-1' and date < '2004-3-15'\n GROUP BY dt\n ORDER BY dt ASC",
    db: "intel"
	},
	fec12 : {
    query: "SELECT sum(disb_amt), disb_dt as day FROM expenses_extradata WHERE (cand_id) = 'P80003338' GROUP BY day",
    db: "fec12"
  },
  movielens: {
    query: "SELECT avg(rating), title FROM ratings WHERE adventure = 1 GROUP BY title",
    db: "movielens"
  }
           
};
</script>



<div class="row-fluid">
<div class="span7">
<form id='querybox' class="form-horizontal"  action='/' method='POST'>

<fieldset>
{% include "dbselect.html" %}
</fieldset>


<fieldset>

<div class="control-group">
	<label class="control-label" for="query">
		Query
	</label>
	<div class="controls">
		<textarea name="query" id="query" class='input-xlarge' style="width:100%" rows=5 >{% if query %}{{query|safe}}{% endif %}</textarea>
	</div>
</div>
</fieldset>

<fieldset class="query-description-fieldset">
	<label class="control-label" for="query">
		Description
	</label>
	<div class="controls">	
		<blockquote id="query_desc"></blockquote>
	</div>
</fieldset>

<fieldset>
<div class="control-group">
	<div class="controls">
		<input type="submit" class="btn btn-primary" style="width:100%;" value="Run Query" />
	</div>
</div>
</fieldset>

</form>


<div id="messagebox">
{% if errormsg %}
	<div class="alert alert-error">
	  <a class="close" data-dismiss="alert">Ã—</a>
	  {{errormsg}}
	</div>
{% endif %}
</div>


</div><!-- end span12 -->


<div class="span4">
	<div id="ql-container"></div>
</div>


</div>

